<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BarberFlow - Sistema de Agendamento para Barbearias</title>
    
    <meta name="description" content="Modernize sua barbearia com BarberFlow, o sistema de agendamento online completo. Gest√£o de clientes, agenda inteligente e muito mais." />
    <meta name="author" content="BarberFlow" />

    <meta property="og:title" content="BarberFlow - Sistema de Agendamento para Barbearias" />
    <meta property="og:description" content="Modernize sua barbearia com BarberFlow, o sistema de agendamento online completo. Gest√£o de clientes, agenda inteligente e muito mais." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://alpha.dualite.dev" />
    <meta property="og:image" content="https://ibb.co/67X3xfSV" />
    <meta property="og:image:width" content="960" />
    <meta property="og:image:height" content="600" />	
    <meta property="og:image:alt" content="Preview do sistema BarberFlow para barbearias" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="BarberFlow - Sistema de Agendamento para Barbearias" />
    <meta name="twitter:description" content="Modernize sua barbearia com BarberFlow, o sistema de agendamento online completo." />
    <meta name="twitter:site" content="@dualitedev" />
    <meta name="twitter:image" content="https://ibb.co/67X3xfSV" />

    <link rel="canonical" href="https://alpha.dualite.dev" />

     <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "BarberFlow",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "description": "Sistema de agendamento online e gest√£o para barbearias.",
      "publisher": {
        "@type": "Organization",
        "name": "BarberFlow"
      }
    }
    </script>

  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- PREVEN√á√ÉO DE REFRESH AUTOM√ÅTICO -->
    <script>
      // Vari√°veis de controle
      let pageWasHidden = false;
      let lastHiddenTime = 0;
      let preventRefresh = false;
      
      // Detectar quando p√°gina fica oculta (troca aba/minimiza)
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          pageWasHidden = true;
          lastHiddenTime = Date.now();
          preventRefresh = true;
          console.log('üîí P√°gina oculta - preven√ß√£o ativada');
        } else {
          console.log('üëÅÔ∏è P√°gina vis√≠vel - aguardando estabiliza√ß√£o');
          // Aguardar um pouco antes de desativar preven√ß√£o
          setTimeout(function() {
            preventRefresh = false;
            pageWasHidden = false;
          }, 2000);
        }
      });
      
      // Interceptar beforeunload para prevenir refresh
      window.addEventListener('beforeunload', function(e) {
        const timeSinceHidden = Date.now() - lastHiddenTime;
        
        if (preventRefresh || timeSinceHidden < 3000) {
          console.log('üö´ Prevenindo refresh autom√°tico');
          e.preventDefault();
          e.returnValue = '';
          return '';
        }
      });
      
      // Prevenir teclas de refresh
      document.addEventListener('keydown', function(e) {
        if (preventRefresh && (e.key === 'F5' || (e.ctrlKey && e.key === 'r'))) {
          console.log('üö´ Prevenindo refresh por tecla');
          e.preventDefault();
          return false;
        }
      });
      
      // Controlar foco da janela
      window.addEventListener('focus', function() {
        console.log('üéØ Janela ganhou foco');
      });
      
      window.addEventListener('blur', function() {
        console.log('üò¥ Janela perdeu foco');
        pageWasHidden = true;
        lastHiddenTime = Date.now();
        preventRefresh = true;
      });
      
      // Service Worker para cache
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
              console.log('‚úÖ Service Worker registrado');
            })
            .catch(function(error) {
              console.log('‚ùå Erro ao registrar Service Worker:', error);
            });
        });
      }
      
      console.log('üõ°Ô∏è Sistema de preven√ß√£o de refresh carregado');
    </script>
  </body>
</html>
